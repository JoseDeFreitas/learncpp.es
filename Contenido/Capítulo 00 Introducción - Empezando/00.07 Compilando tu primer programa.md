# 00.07 Compilando tu primer programa

<details>
    <summary>Información del archivo</summary>

| Autor en inglés | Traductor al español | Fecha de creación | Última modificación |
| --------------- | -------------------- | ----------------- | ------------------- |
| Alex            | José De Freitas      | 28/05/2007        | 22/12/2019          |

</details>

Antes de escribir nuestro primer programa necesitamos aprender a crear nuevos programas a
través de nuestro entorno de desarrollo integrado (IDE). En esta lección te enseñaremos
cómo hacerlo además de enseñarte a cómo compilar y ejecutar tu programa.

#### **Índice**

1. [Proyectos](#proyectos)
2. [Proyectos de consola](#proyectos-de-consola)
3. [Espacios de trabajo y soluciones](#espacios-de-trabajo-y-soluciones)
4. [Escribiendo tu primer programa](#escribiendo-tu-primer-programa)
5. [Creando un proyecto en Visual Studio 2019](#creando-un-proyecto-en-visual-studio-2019)
6. [Creando un proyecto en Visual Studio 2017 o anterior](#creando-un-proyecto-en-visual-studio-2017-o-anterior)
7. ["Solution Explorer" en Visual Studio](#solution-explorer-en-visual-studio)
8. [Creando un proyecto en Code::Blocks](#creando-un-proyecto-en-code::blocks)
9. [Si estás usando g++ en la línea de comandos](#si-estás-usando-g++-en-la-línea-de-comandos)
10. [Si estás usando otro IDE o compilador basado en la web](#si-estás-usando-otro-ide-o-compilador-basado-en-la-web)
11. [Si ocurre un error al compilar](#si-ocurre-un-error-al-compilar)
12. [Si tu programa se ejecuta pero la ventana se cierra inmediatamente](#si-tu-programa-se-ejecuta-pero-la-ventana-se-cierra-inmediatamente)
13. [Conclusión](#conclusión)

## Proyectos

Para escribir un programa en C++ dentro de un IDE se suele empezar creando un nuevo proyecto
(dentro de poco te enseñaremos cómo hacerlo). Un **proyecto** es un contenedor que junta
todos tus archivos de código fuente, imágenes, archivos de datos, etc. que se necesitan para
producir un ejecutable (o librería, sitio web, etc.) que puedas ejecutar y usar. El proyecto
también guarda varios ajustes sobre el IDE, el compilador y el enlazador; también recuerda
en dónde dejaste el proyecto por última vez para que cuando vuelvas a abrirlo el estado del
IDE pueda ser restablecido justo donde lo dejaste. Cuando compilas tu programa todos los
archivos .cpp del proyecto se compilan y se enlazan.

Cada proyecto corresponde a un programa. Cuando terminas de programar un segundo programa
necesitarás crear un neuvo proyecto o cambiar el código de un programa existente (si no
quieres guardar éste). Los archivos del proyecto varían según el IDE, por lo que un proyecto
creado en un IDE necesitará ser creado nuevamente en un IDE diferente.

> **Mejores prácticas**
>
> Crea un nuevo proyecto para cada programa nuevo que escribas.

## Proyectos de consola

Generalmente el IDE te pregunta qué tipo de proyecto quieres crear cuando seleccionas la
creación de un nuevo proyecto. Todos los proyectos que crearemos en estos tutoriales serán
proyectos de consola. Con **proyecto de consola** nos referimos a un proyecto que puede ser
ejecutado y usado en la consola de Windows, Linux o Mac.

Esta es una captura de pantalla de la consola de Windows:

**INSERTE IMAGEN**

Por defecto, las aplicaciones de consola no tienen interfaz gráfica de usuario (GUI por sus
siglas en inglés): estas imprimen texto en la consola, leen texto del input enviado por el
usuario y están compiladas en archivos ejecutables independientes. Esto es perfecto para
aprender C++ ya que hace que la complejidad sea baja y se asegura de que el programa
funciones en una variedad de sistemas.

No te preocupes si no has usado una consola antes o no sabes cómo acceder a ella. Compilaremos
y ejecutaremos nuestros programas a través de nuestro IDE (en el cual invocaremos una consola
cuando sea necesario).

## Espacios de trabajo y soluciones

Cuando creas un nuevo proyecto para tu programa muchos IDE añadirán automáticamente un
"espacio de trabajo" o "solución" (el término varía según el IDE). Un espacio de trabajo o
solución es un contenedor que puede mantener uno o más proyectos relacionados. Por ejemplo,
si estás escribiendo un juego y quieres tener un ejecutable separado para un jugador y
multijugador necesitarás crear dos proyectos. No tendría sentido tener estos dos proyectos
por separado; después de todo, son parte del mismo proyecto. Seguramente cada uno será
configurado como un proyecto diferente en un solo espacio de trabajo/solución.

A pesar de que puedes añadir múltiples proyectos a una sola solución te recomendamos que
crees un nuevo espacio de trabajo o solución para cada programa, especialmente cuando estés
aprendiendo. Es más sencillo y hay menos probabilidades de que ocurra algún problema.

## Escribiendo tu primer programa

Hay una tradición entre los programadores que consta en que tu primer programa sea un
[programa "Hola mundo"](https://es.wikipedia.org/wiki/Hola_mundo) y, ¡no te privaremos de
esa experiencia! Nos agradecerás nuevo (tal vez).

> **Advertencias**
>
> A partir de esta lección verás muchos ejemplos de código de C++. La mayoría de estos 
> ejemplos se verán así:
>
> ```cpp
> #include <iostream>
>
> int main()
> {
> 	std::cout << "¡Hola, mundo!";
> 	return 0;
> }
> ```
>
> Si seleccionas el código de estos ejemplos puedes copiarlo y pegarlo en tu IDE (en donde
> sí podrás ver los números en las líneas). 

## Creando un proyecto en Visual Studio 2019

Cuando ejecutes Visual Studio 2019 deberías ver un cuadro de diálogo como este:

**INSERTE IMAGEN**

Selecciona *Crear un nuevo proyecto ("Create a new project" en inglés)*.

Verás un diálogo de este tipo:

**INSERTE IMAGEN**

Si ya abriste un proyecto previamente puedes acceder a el a través de *Archivo > Nuevo > Proyecto*.

Selecciona *Windows Desktop Wizard* y haz clic en *Siguiente*. Si no ves estas palabras es
probable que hayas olvidado instalar la carga de trabajo "*Aplicación de escritorio con C++*
*("Desktop development with C++" en inglés)*". Si es ese el caso regresa a la [lección 00.06](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.06%20Instalando%20un%20Entorno%20de%20Desarrollo%20Integrado.md)
y reinstala Visual Studio siguiendo los pasos (nota: en vez de hacer una reinstalación
completa, puedes ejecutar el instalador de Visual Studio que usaste para instalarlo por
primera vez y modificar la instalación existente añadiendo la carga de trabajo de C++).

Luego verás este diálogo:

**INSERTE IMAGEN**

Reemplaza el proyecto existente con el nombre `HolaMundo`.

Es recomendable que también selecciones el check "*Colocar solución y proyecto en el mismo*
*directorio ("Place solution and project in the same directory" en inglés)*" ya que esto
reduce el número de subdirectorios que son creados en cada proyecto.

Haz clic en *Crear ("Create" en inglés)* para continuar.

Por último verás este diálogo:

**INSERTE IMAGEN**

Asegúrate de que el *Tipo de aplicación ("Application type" en inglés)* sea *Console Application (.exe)*
y que *Precompiled Header (segundo check)* esté deseleccionado. Luego haz clic en *OK*.

¡Acabas de crear un proyecto! Ve a la sección ["Solution Explorer" en Visual Studio](#solution-explorer-en-visual-studio)
para continuar.

## Creando un proyecto en Visual Studio 2017 o anterior

Para crear un nuevo proyecto en Visual Studio 2017 o anterior ve a *Archivo > Nuevo > Proyecto*.
Aparecerá un diálogo que se verá así:

**INSERTE IMAGEN**

Primero asegúrate de que *Visual C++* aparece en el panel de la izquierda. Si no ves
*Visual C++* probablemente olvidaste instalar la carga de trabajo*Aplicación de escritorio con C++*
cuando instalaste Visual Studio. En ese caso regresa a la [lección 00.06](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.06%20Instalando%20un%20Entorno%20de%20Desarrollo%20Integrado.md)
y reinstala Visual Studio siguiendo los pasos (nota: en vez de hacer una reinstalación
completa, puedes ejecutar el instalador de Visual Studio que usaste para instalarlo por
primera vez y modificar la instalación existente añadiendo la carga de trabajo de C++).

Si estás usando la versión 15.3 de Visual Studio 2017 o superior, debajo de *Visual C++*
selecciona *Windows Desktop* y luego selecciona *Windows Desktop Wizar* en la ventana
principal.

Si no ves *Windows Desktop* como una opción probablemente estés usando una versión anterior
de Visual Studio. Eso está bien. En vez de hacer esos pasos elige *Win32* y luego
*Aplicación de consola de Win32 ("Win32 Console Application")* en la ventana principal.

Abajo, en el campo de *Nombre* escribe el nombre de tu programa (reemplaza el nombre actual
con `HolaMundo`). En el campo de *Ubicación ("Location" en inglés)* puedes seleccionar la
ubicación en donde quieras que tu proyecto se almacene. La ubicación predeterminada está
bien por ahora.

Haz clic en *OK*. Si estás usando una versión anterior de Visual Studio se ejecutará
Win32 Application Wizard. Presiona *Siguiente*.

En este pundo verás un diálogo en el asistente que se ve como esto (puede que las versiones
anteriores de Visual Studio tengan un estilo diferente, pero tendrán casi las mismas opciones):

**INSERTE IMAGEN**

Asegúrate de deseleccionar *Precompiled Header (tercera opción)*.

Luego haz clic en *OK* o *Finalizar*. ¡Tu proyecto se habrá creado!

## "Solution Explorer" en Visual Studio

En el panel de la izquierda o de la derecha verás una ventada llamada *Solution Explorer*.
Dentro de esta ventana Visual Studio ha creado un solución para ti (en este caso, solución
'HolaMundo'). Dentro de esta, con tu nombre en negrilla, está el nombre de tu nuevo proyecto
(*HolaMundo*). Visual Studio ha creado varios archivos dentro de tu proyecto, incluyendo el
archivo *HolaMundo.cpp* (debajo de *Source Files*). Puede que también veas otros archivos
.cpp o .h; puedes ignorarlos por ahora.

**INSERTE IMAGEN**

En el editor de texto verás que Visual Studio ha abierto *HolaMundo.cpp* y ha escrito algo
de código. Selecciónalo y borra todo el código. Luego, escribe o copia el código siguiente:

```cpp
#include <iostream>
 
int main()
{
	std::cout << "¡Hola, mundo!";
	return 0;
}
```

Para compilar tu programa puedes presionar la tecla *F7* (si esta no funciona presiona
*Ctrl-Shift-B*) o ir al menú *Build > Build Solution*. Si todo va bien aparecerá este texto
en la ventana de output:

```
1>------ Build started: Project: HolaMundo, Configuration: Debug Win32 ------
1>HolaMundo.cpp
1>HolaMundo.vcxproj -> c:\users\Jose\documents\visual studio 2017\Projects\HolaMundo\Debug\HolaMundo.exe
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========
```

¡Esto significa que tu programa ha sido compilado satisfactoriamente!

> **Obtuve el error C1010 ("fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?"). ¿Ahora qué?**
>
> Esto está ocurriendo porque olvidaste deseleccionar *Precompiled Headers* cuando creaste
> tu proyecto. Crea tu proyecto de nuevo (siguiendo las [instrucciones arriba](#creando-un-proyecto-en-visual-studio-2019))
> y asegúrate de deseleccionar esta opción.

Para ejecutar tu programa ya compilado presiona *Ctrl+F5* o ve al menú *Debug* y elige
*Start Without Debugging*. Verás lo siguiente:

**INSERTE IMAGEN**

¡Ese es el resultado que arroja tu programa! Felicidades, has compilado y ejecutado tu
primer programa.

## Creando un proyecto en Code::Blocks

Para crear un nuevo proyecto ve a *Archivo > Nuevo > Proyecto*. Aparecerá un diálogo que se
ve así:

**INSERTE IMAGEN**

Selecciona *Aplicación de consola* y presiona *Go (o Create)*.

Si ves un diálogo de la aplicación de consola presiona *Siguiente*. Asegúrate de que C++
está seleccionado y presiona *Siguiente* nuevamente.

Ahora podrás escribir el nombre de tu programa. Nómbralo `HolaMundo`. Puedes guardarlo
donde quieras. Si estás en Windows te recomendamos que lo guardes en un subdirectorio del
disco C, como C:\ProyectosCB.

**INSERTE IMAGEN**

Puede que aparezca otro diálogo preguntándote cuáles ajustes quieres activar. Los ajustes
predeterminados están bien, así que haz clic en *Finish*.

Ahora tu nuevo proyecto ha sido creado.

En el panel izquierdo de la ventana verás una ventana llamada *Management*, la cual contiene
la pestaña de *Projects*, entre otros. Dentro de esa ventana verás una carpeta llamada
*Workspace* con tu proyecto *HolaMundo* dentro de ella:

**INSERTE IMAGEN**

Dentro del proyecto *HolaMundo* abre la carpeta *Sources* y haz doble clic en "main.cpp".
Verás que el programa hola mundo viene con código escrito.

Reemplaza ese código con está porción:

```cpp
#include <iostream>
 
int main()
{
	std::cout << "¡Hola, mundo!";
	return 0;
}
```

Para construir tu proyecto presiona *Ctrl+F9* o ve al menú *Build > Build*. Si todo va bien
deberías ver este texto aparecer en la ventana:

```
-------------- Build: Debug in HolaMundo (compiler: GNU GCC Compiler)---------------
mingw32-g++.exe -Wall -fexceptions -g -std=c++14  -c C:\CBProjects\HolaMundo\main.cpp -o obj\Debug\main.o
mingw32-g++.exe  -o bin\Debug\HolaMundo.exe obj\Debug\main.o   
Output file is bin\Debug\HolaMundo.exe with size 1.51 MB
Process terminated with status 0 (0 minute(s), 0 second(s))
0 error(s), 0 warning(s) (0 minute(s), 0 second(s))
```

¡Esto significa que el proceso de compilación ha sido exitoso!

Para ejecutar tu programa ya compilado presiona *Ctrl+F10* o ve al menú *Build > Run*. Verás
lo siguiente en la consola:

**INSERTE IMAGEN**

¡Ese es el resultado de tu programa!

> **Para los usuarios de Linux**
>
> Si usas Linux puede que necesites instalar paquetes adicionales antes de compilar código
> en Code::Blocks. Por favor, ve las instrucciones de instalación de Code::Blocks en la
> [lección 00.06](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.06%20Instalando%20un%20Entorno%20de%20Desarrollo%20Integrado.md)
> para más información.

## Si estás usando g++ en la línea de comandos

En este caso no necesitas crear un proyecto. Simplemente copia el código siguiente en un
archivo de texto llamado HolaMundo.cpp y guárdalo:

```cpp
#include <iostream>
 
int main()
{
	std::cout << "¡Hola, mundo!";
	return 0;
}
```

Desde la línea de comandos escribe lo siguiente:

```
g++ -o HolaMundo HolaMundo.cpp
```

Esto compilará tu programa y lo enlazará con HolaMundo.cpp. Para ejecutarlo escribe:

```
HolaMundo
```

Si no funciona, escribe `./HolaMundo`. Verás el output de tu programa.

## Si estás usando otro IDE o compilador basado en la web

Tendrás que configurar su funcionamiento por tu cuenta:
1. Crea un proyecto de consola (solo para IDE).
2. Añade un archivo .cpp al proyecto (solo para IDE y si no se crea un automáticamente).
3. Pega el código siguiente en el archivo:
    ```cpp
    #include <iostream>
    
    int main()
    {
    	std::cout << "¡Hola, mundo!";
    	return 0;
    }
    ```
4. Compila el proyecto.
5. Ejecuta el proyecto.

## Si ocurre un error al compilar

Está bien, es algo que puede ocurrir. Antes que nada toma un suspiro. ¡Seguramente podamos
solucionarlo! :).

Primero lee el mensaje de error que devolvió el compilador. Muy a menudo este mensaje te
indicará el número de la línea en donde se produjo el error. Examina esa línea y las líneas
que están cerca de ella y asegúrate de que no hay ningún error de escritura.

Segundo, ve la sección de preguntas y respuestas en la [lección 00.08](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.08%20Problemas%20comunes%20en%20C%2B%2B.md)
ya que puede que se habla del problema que estás teniendo en esa sección.

Tercero, puedes unirte al [chat de learncpp.es](https://discord.gg/baZDt2cAFg) o abrir un 
issue o discussion y preguntar explicar tu problema o, puede que mejor aun, buscar si alguien
ya ha reportado este problema anteriormente.

Por último, si no puedes solucionar el problema siguiendo las recomendaciones de arriba,
busca en tu buscador pegando el mensaje de error que recibiste. Es posible que alguien más
haya tenido este errores y que haya encontrado cómo arreglarlo.

## Si tu programa se ejecuta pero la ventana se cierra inmediatamente

Algunos IDE no pausan la ventana de consola cuando tu programa termina de ejecutarse. Tu
programa sí se está ejecutando, lo que pasa es que la ventana se cierra tan rápido que no
puedes ver los resultados.

Si esto te está ocurriendo sigue estos pasos para solucionarlo:

Primero, añade las siguientes líneas de código en las primeras líneas de tu programa (para
los usuarios de Visual Studio: asegúrense de que estas líneas aparezcan luego de
`#include "pch.h"` o `#include "stdafx.h"`, si existen):

```cpp
#include <iostream>
#include <limits>
```

Segundo, añade el código siguiente al final de la función main() (justo antes de la palabra
"return"):

```cpp
std::cin.clear(); // resetea errores
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // ignora cualquier caracter en el input hasta que se reciba una nueva línea
std::cin.get(); // recibe uno o más caracteres del usuario
```

Esto hará que tu programa espere a que presiones una tecla antes de continuar, dándote tiempo
de leer el output de tu programa antes de que se cierre la ventana de la consola.

Otras soluciones (como la solución `system("pause")`, muy recomendada) puede que solo
funcione en sistemas operativos específicos. Es por esto que es mejor evitarla.

Puede que tu antivirus esté bloqueando la ejecución de tu programa. Si ese es el caso intenta
desactivar temporalmente tu antivirus y revisa si persiste el problema.

> **Para usuarios de Visual Studio**
>
> Visual Studio no pausará la ventana de la consola si ejecutas tu aplicación con la opción
> de depuración (Debug > Start Debugging) activada. Si quieres pausarla puedes usar la
> solución que exponemos arriba o puedes ejecutar tu programa sin depurar (Debug > Start
> Without Debugging).

## Conclusión

¡Felicidades! Has completado la parte más difícil de este tutorial (instalar el IDE y
compilar tu primer programa).

No te preocupes si no entiendes qué están haciendo las líneas de código en el programa hola
mundo que acabas de escribir. Veremos en detalle cada línea al comienzo del siguiente capítulo.

---

**[Lección anterior](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.06%20Instalando%20un%20Entorno%20de%20Desarrollo%20Integrado.md)** - **[Contenido](https://github.com/JoseDeFreitas/learncpp.es#contenido)** - **[Lección siguiente](/Contenido/Cap%C3%ADtulo%2000%20Introducci%C3%B3n%20-%20Empezando/00.08%20Problemas%20comunes%20en%20C%2B%2B.md)**
